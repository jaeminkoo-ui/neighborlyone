<VirtualHost *:80>
    ServerName neighborlyone.com
    ServerAlias www.neighborlyone.com
    ServerAdmin admin@neighborlyone.com

    # Document Root (optional, for static files)
    DocumentRoot /var/www/neighborlyone.com/build/client

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/neighborlyone-error.log
    CustomLog ${APACHE_LOG_DIR}/neighborlyone-access.log combined

    # Proxy to Node.js application running on port 4000
    ProxyPreserveHost On
    ProxyPass / http://localhost:4000/
    ProxyPassReverse / http://localhost:4000/

    # WebSocket support (if needed)
    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) "ws://localhost:4000/$1" [P,L]

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"

    # Optional: Static file handling
    <Directory /var/www/neighborlyone.com/build/client>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
</VirtualHost>

# SSL configuration (uncomment after getting SSL certificate)
#<VirtualHost *:443>
#    ServerName neighborlyone.com
#    ServerAlias www.neighborlyone.com
#    ServerAdmin admin@neighborlyone.com
#
#    # SSL Certificates
#    SSLEngine on
#    SSLCertificateFile /etc/letsencrypt/live/neighborlyone.com/fullchain.pem
#    SSLCertificateKeyFile /etc/letsencrypt/live/neighborlyone.com/privkey.pem
#
#    # Proxy settings
#    ProxyPreserveHost On
#    ProxyPass / http://localhost:4000/
#    ProxyPassReverse / http://localhost:4000/
#
#    # WebSocket support
#    RewriteEngine on
#    RewriteCond %{HTTP:Upgrade} websocket [NC]
#    RewriteCond %{HTTP:Connection} upgrade [NC]
#    RewriteRule ^/?(.*) "ws://localhost:4000/$1" [P,L]
#
#    # Logging
#    ErrorLog ${APACHE_LOG_DIR}/neighborlyone-ssl-error.log
#    CustomLog ${APACHE_LOG_DIR}/neighborlyone-ssl-access.log combined
#</VirtualHost>









